// MarkdownDeep - http://www.toptensoftware.com/markdowndeep
// Copyright (C) 2010-2011 Topten Software
// Minified by MiniME from toptensoftware.com
var BLOCKTYPE_CONST={Blank:0,h1:1,h2:2,h3:3,h4:4,h5:5,h6:6,post_h1:7,post_h2:8,quote:9,ol_li:10,ul_li:11,p:12,indent:13,
hr:14,user_break:15,html:16,unsafe_html:17,span:18,codeblock:19,li:20,ol:21,ul:22,HtmlTag:23,Composite:24,table_spec:25,
dd:26,dt:27,dl:28,footnote:29,p_footnote:30},MarkdownDeep=new(function(){function R(b,e){if(b.indexOf!==undefined)
return b.indexOf(e);for(var c=0;c<b.length;c++)if(b[c]===e)return c;return-1}function h(){this.bC=new E(this);this.bF=[]
;this.bH=new G();this.bI=new G()}h.prototype={SafeMode:false,ExtraMode:false,MarkdownInHtml:false,AutoHeadingIDs:false,
AllowInlineImages:false,UrlBaseLocation:null,UrlRootLocation:null,NewWindowForExternalLinks:false,NewWindowForLocalLinks
:false,NoFollowLinks:false,NoFollowExternalLinks:false,HtmlClassFootnotes:"footnotes",HtmlClassTitledImages:null,
RenderingTitledImage:false,FormatCodeBlockAttributes:null,FormatCodeBlock:null,ExtractHeadBlocks:false,UserBreaks:false,
HeadBlockContent:"",RequireHeaderClosingTag:true,HtmlFormatLineBreaks:true,DisabledBlockTypes:[]};var a=h.prototype;
function ap(b,c,e,f){return b.slice(0,c).concat(f).concat(b.slice(c+e))}h.prototype.GetListItems=function(k,n){var c=
this.aH(k),b;for(b=0;b<c.length;b++){var e=c[b];if((e.u==BLOCKTYPE_CONST.Composite||e.u==BLOCKTYPE_CONST.html||e.u==
BLOCKTYPE_CONST.HtmlTag)&&e.B){c=ap(c,b,1,e.B);b--;continue}if(n<e.aA)break}b--;if(b<0)return null;var i=c[b];if(i.u!=
BLOCKTYPE_CONST.ul&&i.u!=BLOCKTYPE_CONST.ol)return null;var f=[],m=i.B;for(var j=0;j<m.length;j++)f.push(m[j].aA);b++;
if(b<c.length)f.push(c[b].aA);else f.push(k.length);return f};h.prototype.Transform=function(c){var n=c.indexOf("\r");
if(n>=0){var m=c.indexOf("\n");if(m>=0)if(m<n)c=c.replace(/\n\r/g,"\n");else c=c.replace(/\r\n/g,"\n");c=c.replace(/\r/g
,"\n")}c=c.replace(/\u200B/g,"");this.HeadBlockContent="";var k=this.aH(c);if(this.bq!=null){var j=[];for(var r in this.
bq)j.push(this.bq[r]);j.sort(function(p,q){return q.Abbr.length-p.Abbr.length});this.bq=j}var b=this.bI;b.I();for(var f=
0;f<k.length;f++){var s=k[f];s.m(this,b)}if(this.bL.length>0){b.y('\n<div class="');b.y(this.HtmlClassFootnotes);b.y(
'">\n');b.y("<hr />\n");b.y("<ol>\n");for(var f=0;f<this.bL.length;f++){var i=this.bL[f];b.y('<li id="fn:');b.y(i.Z);b.y
('">\n');var o='<a href="#fnref:'+i.Z+'" rev="footnote">&#8617;</a>',e=i.B[i.B.length-1];if(e.u==BLOCKTYPE_CONST.p){e.u=
BLOCKTYPE_CONST.p_footnote;e.Z=o}else{e=new B();e.M=0;e.u=BLOCKTYPE_CONST.p_footnote;e.Z=o;i.B.push(e)}i.m(this,b);b.y(
"</li>\n")}b.y("</ol>\n");b.y("</div>\n")}return b.bk()};h.prototype.OnQualifyUrl=function(b,f){if(f&&ai(b)&&!ak(b))b=
"http://"+b;if(ak(b))return b;if(av(b,"/")){var e=this.UrlRootLocation;if(!e){if(!this.UrlBaseLocation)return b;var c=
this.UrlBaseLocation.indexOf("://");if(c==-1)c=0;else c+=3;c=this.UrlBaseLocation.indexOf("/",c);e=c<0?this.
UrlBaseLocation:this.UrlBaseLocation.substr(0,c)}return e+b}else{if(!this.UrlBaseLocation)return b;if(!S(this.
UrlBaseLocation,"/"))return this.UrlBaseLocation+"/"+b;else return this.UrlBaseLocation+b}};h.prototype.OnGetImageSize=
function(b,c){return null};h.prototype.OnPrepareLink=function(b){var c=b.attributes.href;if(this.NoFollowLinks)b.
attributes.rel="nofollow";if(this.NoFollowExternalLinks)if(aj(c))b.attributes.rel="nofollow";if(this.
NewWindowForExternalLinks&&aj(c)||this.NewWindowForLocalLinks&&!aj(c))b.attributes.target="_blank";b.attributes.href=
this.OnQualifyUrl(c,true)};h.prototype.OnPrepareImage=function(b,e){var c=this.OnGetImageSize(b.attributes.src,e);if(c!=
null){b.attributes.width=c.width;b.attributes.height=c.height}b.attributes.src=this.OnQualifyUrl(b.attributes.src)};h.
prototype.GetLinkDefinition=function(b){if(this.by.hasOwnProperty(b))return this.by[b];else return null};var F=function(
f){var k=new h();k.UserBreaks=true;var e=k.aH(f),i=[],b=0;for(var c=0;c<e.length;c++){var j=e[c];if(j.u==BLOCKTYPE_CONST
.user_break){var m=j.aA;i.push(f.substr(b,m-b).trim());if(c+1<e.length){b=e[c+1].aA;if(b==0)b=e[c+1].R}else b=f.length}}
if(f.length>b)i.push(f.substring(b).trim());return i};a.aH=function(b){this.by=[];this.bv=[];this.bL=[];this.bM=[];this.
bq=null;return new D(this,this.MarkdownInHtml).aK(b)};a.A=function(b){this.by[b.id]=b};a.z=function(b){this.bv[b.Z]=b};a
.O=function(c){var b=this.bv[c];if(b!=undefined){this.bL.push(b);delete this.bv[c];return this.bL.length-1}else return-1
};a.x=function(b,c){if(this.bq==null)this.bq=[];this.bq[b]={Abbr:b,Title:c}};a.ao=function(){return this.bq};a.aE=
function(j,i,f){if(!this.AutoHeadingIDs)return null;var b=this.bC.aD(j,i,f);if(!b)b="section";var c=b,e=1;while(this.bM[
c]!=undefined){c=b+"-"+e.toString();e++}this.bM[c]=true;return c};a.au=function(){this.bH.I();return this.bH};function X
(b){return b>="0"&&b<="9"}function af(b){return b>="0"&&b<="9"||b>="a"&&b<="f"||b>="A"&&b<="F"}function aa(b){return b>=
"a"&&b<="z"||b>="A"&&b<="Z"}function P(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"||b>="0"&&b<="9"}function ab(b){return b
==" "||b=="\t"||b=="\r"||b=="\n"}function ac(b){return b=="."||b==","||b=="?"||b=="!"||b==";"||b==":"}function ad(b){
return b==" "||b=="\t"}function Y(b){return b=="\r"||b=="\n"}function ae(b){return b=="*"||b=="_"}function U(b,c){
switch(b){case"\\":case"`":case"*":case"_":case"{":case"}":case"[":case"]":case"(":case")":case">":case"#":case"+":case
"-":case".":case"!":return true;case":":case"|":case"=":case"<":return c}return false}function at(c,b){if(c.charAt(b)!=
"&")return-1;var f=b;b++;var e;if(c.charAt(b)=="#"){b++;if(c.charAt(b)=="x"||c.charAt(b)=="X"){b++;e=af}else e=X}else e=
P;if(e(c.charAt(b))){b++;while(e(c.charAt(b)))b++;if(c.charAt(b)==";"){b++;return b}}b=f;return-1}function aA(c,i){var b
=c.indexOf("\\");if(b<0)return c;var f=new G(),e=0;while(b>=0){if(U(c.charAt(b+1),i)){if(b>e)f.y(c.substr(e,b-e));e=b+1}
b=c.indexOf("\\",b+1)}if(e<c.length)f.y(c.substr(e,c.length-e));return f.bk()}function az(e){var b=0,c=e.length;while(b<
c&&ab(e.charAt(b)))b++;while(c-1>b&&ab(e.charAt(c-1)))c--;return e.substr(b,c-b)}function ag(c){var b=c.indexOf("@");if(
b<0)return false;var e=c.lastIndexOf(".");if(e<b)return false;return true}function am(b){b=b.toLowerCase();if(b.substr(0
,7)=="http://")return true;if(b.substr(0,8)=="https://")return true;if(b.substr(0,6)=="ftp://")return true;if(b.substr(0
,7)=="file://")return true;return false}function al(c){if(!c)return false;if(!aa(c.charAt(0)))return false;for(var e=0;e
<c.length;e++){var b=c.charAt(e);if(P(b)||b=="_"||b=="-"||b==":"||b==".")continue;return false}return true}function au(c
,e,j){var b=j-1;while(b>=e&&ab(c.charAt(b)))b--;if(b<e||c.charAt(b)!="}")return null;var k=b;b--;while(b>=e&&c.charAt(b)
!="{")b--;if(b<e||c.charAt(b+1)!="#")return null;var f=b+2,i=c.substr(f,k-f);if(!al(i))return null;while(b>e&&ab(c.
charAt(b-1)))b--;return{id:i,end:b}}function av(c,b){return c.substr(0,b.length)==b}function S(c,b){return c.substr(-b.
length)==b}function ak(b){return av(b,"#")||aj(b)}function aj(b){return b.indexOf("://")>=0||av(b,"mailto:")}function G(
){this.bt=[]}a=G.prototype;a.y=function(b){if(b)this.bt.push(b)};a.I=function(){this.bt.length=0};a.bk=function(){
return this.bt.join("")};a.ay=function(c){var f=c.length;for(var b=0;b<f;b++){var e=Math.random();if(e>0.90&&c.charAt(b)
!="@")this.y(c.charAt(b));else if(e>0.45){this.y("&#");this.y(c.charCodeAt(b).toString());this.y(";")}else{this.y("&#x")
;this.y(c.charCodeAt(b).toString(16));this.y(";")}}};a.aw=function(e,f,j){var i=f+j,b=f,c;for(c=f;c<i;c++)switch(e.
charAt(c)){case"&":if(c>b)this.y(e.substr(b,c-b));this.y("&amp;");b=c+1;break;case"<":if(c>b)this.y(e.substr(b,c-b));
this.y("&lt;");b=c+1;break;case">":if(c>b)this.y(e.substr(b,c-b));this.y("&gt;");b=c+1;break;case'"':if(c>b)this.y(e.
substr(b,c-b));this.y("&quot;");b=c+1;break}if(c>b)this.y(e.substr(b,c-b))};a.bi=function(e,f,k){var j=f+k,c=f,b;for(b=f
;b<j;b++)switch(e.charAt(b)){case"&":var i=at(e,b);if(i<0){if(b>c)this.y(e.substr(c,b-c));this.y("&amp;");c=b+1}else b=i
-1;break;case"<":if(b>c)this.y(e.substr(c,b-c));this.y("&lt;");c=b+1;break;case">":if(b>c)this.y(e.substr(c,b-c));this.y
("&gt;");c=b+1;break;case'"':if(b>c)this.y(e.substr(c,b-c));this.y("&quot;");c=b+1;break}if(b>c)this.y(e.substr(c,b-c))}
;a.bh=function(e,f,k){var j=f+k,c=f,b;for(b=f;b<j;b++)switch(e.charAt(b)){case"&":var i=at(e,b);if(i<0){if(b>c)this.y(e.
substr(c,b-c));this.y("&amp;");c=b+1}else b=i-1;break}if(b>c)this.y(e.substr(c,b-c))};a.ax=function(e,i,k){var j=i+k,b=i
,f=0,c;for(c=i;c<j;c++){switch(e.charAt(c)){case"\t":if(c>b)this.y(e.substr(b,c-b));b=c+1;this.y(" ");f++;while(f%4!=0){
this.y(" ");f++}f--;break;case"\r":case"\n":if(c>b)this.y(e.substr(b,c-b));this.y("\n");b=c+1;continue;case"&":if(c>b)
this.y(e.substr(b,c-b));this.y("&amp;");b=c+1;break;case"<":if(c>b)this.y(e.substr(b,c-b));this.y("&lt;");b=c+1;break;
case">":if(c>b)this.y(e.substr(b,c-b));this.y("&gt;");b=c+1;break;case'"':if(c>b)this.y(e.substr(b,c-b));this.y("&quot;"
);b=c+1;break}f++}if(c>b)this.y(e.substr(b,c-b))};function H(){this.aX.apply(this,arguments)}a=H.prototype;a.D=function(
){return this.bB==this.start};a.K=function(){return this.bB>=this.end};a.X=function(){if(this.bB>=this.end)return true;
var b=this.E.charAt(this.bB);return b=="\r"||b=="\n"||b==undefined||b==""};a.aX=function(){this.E=arguments.length>0?
arguments[0]:null;this.start=arguments.length>1?arguments[1]:0;this.end=arguments.length>2?this.start+arguments[2]:this.
E==null?0:this.E.length;this.bB=this.start;this.charset_offsets={}};a.J=function(){if(this.bB>=this.end)return"\x00";
return this.E.charAt(this.bB)};a.aI=function(){if(this.bB-1<this.start||this.bB-1>=this.end)return"\x00";return this.E.
charAt(this.bB-1)};a.aP=function(){return this.E.substr(this.bB)};a.bd=function(){this.bB=this.end};a.a8=function(b){
this.bB+=b};a.be=function(){this.bB=this.E.indexOf("\n",this.bB);if(this.bB<0)this.bB=this.end};a.a2=function(){var b=
this.bB;if(this.E.charAt(this.bB)=="\r")this.bB++;if(this.E.charAt(this.bB)=="\n")this.bB++;return this.bB!=b};a.bf=
function(){this.be();this.a2()};a.F=function(b){if(this.bB+b>=this.end)return"\x00";return this.E.charAt(this.bB+b)};a.
aZ=function(b){if(this.E.charAt(this.bB)==b){this.bB++;return true}return false};a.bc=function(b){if(this.E.substr(this.
bB,b.length)==b){this.bB+=b.length;return true}return false};a.bg=function(){var c=this.bB;while(true){var b=this.E.
charAt(this.bB);if(b!=" "&&b!="\t"&&b!="\r"&&b!="\n")break;this.bB++}return this.bB!=c};a.bb=function(){var c=this.bB;
while(true){var b=this.E.charAt(this.bB);if(b!=" "&&b!="\t")break;this.bB++}return this.bB!=c};a.af=function(c){c.
lastIndex=this.bB;var b=c.exec(this.E);if(b==null){this.bB=this.end;return false}if(b.index+b[0].length>this.end){this.
bB=this.end;return false}this.bB=b.index;return true};a.ae=function(f){var c=-1;for(var e in f){var b=f[e];if(b==null){b
={};b.bG=-1;b.bw=-1;f[e]=b}if(b.bG==-1||this.bB<b.bG||this.bB>=b.bw&&b.bw!=-1){b.bG=this.bB;b.bw=this.E.indexOf(e,this.
bB)}if(c==-1||b.bw<c)c=b.bw}if(c==-1){c=this.end;return false}a.bB=c;return true};a.ab=function(b){this.bB=this.E.
indexOf(b,this.bB);if(this.bB<0){this.bB=this.end;return false}return true};a.aB=function(){this.mark=this.bB};a.Y=
function(){if(this.mark>=this.bB)return"";else return this.E.substr(this.mark,this.bB-this.mark)};a.ba=function(){var b=
this.E.charAt(this.bB);if(b>="a"&&b<="z"||b>="A"&&b<="Z"||b=="_"){this.bB++;while(true){b=this.E.charAt(this.bB);if(b>=
"a"&&b<="z"||b>="A"&&b<="Z"||b=="_"||b>="0"&&b<="9")this.bB++;else return true}}return false};a.a7=function(){var e=this
.bB;this.bb();this.aB();while(true){var b=this.J();if(P(b)||b=="-"||b=="_"||b==":"||b=="."||b==" ")this.a8(1);else break
}if(this.bB>this.mark){var c=az(this.Y());if(c.length>0){this.bb();return c}}this.bB=e;return null};a.a9=function(){if(
this.E.charAt(this.bB)!="&")return false;var b=at(this.E,this.bB);if(b<0)return false;this.bB=b;return true};a.a5=
function(b){if(this.E.charAt(this.bB)=="\\"&&U(this.E.charAt(this.bB+1),b)){this.bB+=2;return true}else{if(this.bB<this.
end)this.bB++;return false}};function x(b){this.name=b;this.attributes={};this.flags=0;this.closed=false;this.closing=
false}a=x.prototype;a.C=function(){if(!this.attributes)return 0;var b=0;for(var c in this.attributes)b++;return b};a.ar=
function(){if(this.flags==0){this.flags=ax[this.name.toLowerCase()];if(this.flags==undefined)this.flags=2}return this.
flags};a.av=function(){var c=this.name.toLowerCase();if(!Q[c])return false;var b=O[c];if(!b)return this.C()==0;if(!this.
attributes)return true;for(var e in this.attributes)if(!b[e.toLowerCase()])return false;if(this.attributes.href)if(!ai(
this.attributes.href))return false;if(this.attributes.src)if(!ai(this.attributes.src))return false;return true};a.aV=
function(b){b.y("<");b.y(this.name);for(var c in this.attributes){b.y(" ");b.y(c);b.y('="');b.y(this.attributes[c]);b.y(
'"')}if(this.closed)b.y(" />");else b.y(">")};a.aR=function(b){b.y("</");b.y(this.name);b.y(">")};function ai(b){b=b.
toLowerCase();return b.substr(0,1)=="#"||b.substr(0,4)=="www."||b.substr(0,7)=="http://"||b.substr(0,8)=="https://"&&b.
substr(0,9)!="javascript"}function ah(b){var e=b.bB,c=aq(b);if(c!=null)return c;b.bB=e;return null}function aq(b){if(b.J
()!="<")return null;b.a8(1);if(b.bc("!--")){b.aB();if(b.ab("-->")){var f=new x("!");f.attributes.content=b.Y();f.closed=
true;b.a8(3);return f}}var i=b.aZ("/");b.aB();if(!b.ba())return null;var c=new x(b.Y());c.closing=i;if(i){if(b.J()!=">")
return null;b.a8(1);return c}while(!b.K()){b.bg();if(b.bc("/>")){c.closed=true;return c}if(b.aZ(">"))return c;b.aB();if(
!b.ba())return null;var e=b.Y();b.bg();if(b.aZ("=")){b.bg();if(b.aZ('"')){b.aB();if(!b.ab('"'))return null;c.attributes[
e]=b.Y();b.a8(1)}else{b.aB();while(!b.K()&&!ab(b.J())&&b.J()!=">"&&b.J()!="/")b.a8(1);if(!b.K())c.attributes[e]=b.Y()}}
else c.attributes[e]=""}return null}var Q={},O={a:{href:1,title:1,"class":1},img:{src:1,width:1,height:1,alt:1,title:1,
"class":1}},d=1,l=2,t=4,g=8,ax={p:d|g,div:d,h1:d|g,h2:d|g,h3:d|g,h4:d|g,h5:d|g,h6:d|g,blockquote:d,pre:d,table:d,dl:d,ol
:d,ul:d,form:d,fieldset:d,iframe:d,script:d|l,noscript:d|l,math:d|l,ins:d|l,del:d|l,img:d|l,li:g,dd:g,dt:g,td:g,th:g,
legend:g,address:g,hr:d|t,"!":d|t,head:d};delete d;delete l;delete t;function C(c,e,b){this.id=c;this.url=e;if(b==
undefined)this.title=null;else this.title=b}a=C.prototype;a.aU=function(f,i,j){var e=new x("a"),c=f.au();c.bi(this.url,0
,this.url.length);e.attributes.href=c.bk();if(this.title){c.I();c.bi(this.title,0,this.title.length);e.attributes.title=
c.bk()}f.OnPrepareLink(e);this.url=e.attributes.href;var b=f.au();e.aV(b);b.y(j);b.y("</a>");if(ai(this.url))i.y(b.bk())
;else i.aw(b.bk(),0,b.bk().length)};a.aS=function(f,i,e){var c=new x("img"),b=f.au();b.bi(this.url,0,this.url.length);c.
attributes.src=b.bk();if(e){b.I();b.bi(e,0,e.length);c.attributes.alt=b.bk()}if(this.title){b.I();b.bi(this.title,0,this
.title.length);c.attributes.title=b.bk()}c.closed=true;f.OnPrepareImage(c,f.RenderingTitledImage);c.aV(i)};function ao(b
,e){var f=b.bB,c=ar(b,e);if(c==null)b.bB=f;return c}function ar(b,e){b.bg();if(!b.aZ("["))return null;b.aB();if(!b.ab(
"]"))return null;var c=b.Y();if(c.length==0)return null;if(!b.bc("]:"))return null;var f=as(b,c,e);b.bb();if(!b.X())
return null;return f}function as(b,i,c){b.bg();if(b.X())return null;var e=new C(i);if(b.aZ("<")){b.aB();while(b.J()!=">"
){if(b.K())return null;b.a5(c)}var p=b.Y();if(!b.aZ(">"))return null;e.url=aA(az(p),c);b.bg()}else{b.aB();var k=1;while(
!b.X()){var j=b.J();if(ab(j))break;if(i==null)if(j=="(")k++;else if(j==")"){k--;if(k==0)break}b.a5(c)}e.url=aA(az(b.Y())
,c)}b.bb();if(b.J()==")")return e;var m=b.X(),n=b.bB;if(b.X()){b.a2();b.bb()}var f;switch(b.J()){case"'":case'"':f=b.J()
;break;case"(":f=")";break;default:if(m){b.bB=n;return e}else return null}b.a8(1);b.aB();while(true){if(b.X())
return null;if(b.J()==f){if(f!=")"){var o=b.bB;b.a8(1);b.bb();if(i==null&&b.J()!=")"||i!=null&&!b.X())continue;b.bB=o}
break}b.a5(c)}e.title=aA(b.Y(),c);b.a8(1);return e}function an(b,c){this.def=b;this.link_text=c}function ay(e,c,b){this.
type=e;this.startOffset=c;this.length=b;this.Z=null}function E(b){this.bz=b;this.bE=new H();this.bJ=[];this.bu=false;
this.bK=[]}a=E.prototype;a.aj=function(b,e,i,f){this.bm(e,i,f);if(this.bK.length==1&&this.bz.HtmlClassTitledImages!=null
&&this.bK[0].type==10){var c=this.bK[0].Z;b.y('<div class="');b.y(this.bz.HtmlClassTitledImages);b.y('">\n');this.bz.
RenderingTitledImage=true;this.m(b,e);this.bz.RenderingTitledImage=false;b.y("\n");if(c.def.title){b.y("<p>");b.bi(c.def
.title,0,c.def.title.length);b.y("</p>\n")}b.y("</div>\n")}else{b.y("<p>");this.m(b,e);b.y("</p>\n")}};a.ah=function(c,b
){this.ag(c,b,0,b.length)};a.ag=function(c,b,f,e){this.bm(b,f,e);this.m(c,b)};a.ai=function(c){var b=new G();this.ag(b,c
,0,c.length);return b.bk()};a.aD=function(j,n,m){this.bm(j,n,m);var k=this.bK,c=new G();for(var i=0;i<k.length;i++){var 
f=k[i];switch(f.type){case 0:c.y(j.substr(f.startOffset,f.length));break;case 9:c.y(f.Z.link_text);break}this.am(f)}var 
b=this.bE;b.aX(c.bk());while(!b.K()){if(aa(b.J()))break;b.a8(1)}c.I();while(!b.K()){var e=b.J();if(P(e)||e=="_"||e=="-"
||e==".")c.y(e.toLowerCase());else if(e==" ")c.y("-");else if(Y(e)){c.y("-");b.a2();continue}b.a8(1)}return c.bk()};a.m=
function(b,i){var n=this.bK,o=n.length;for(var j=0;j<o;j++){var c=n[j];switch(c.type){case 0:b.aw(i,c.startOffset,c.
length);break;case 1:b.bh(i,c.startOffset,c.length);break;case 2:case 11:case 12:case 13:b.y(i.substr(c.startOffset,c.
length));break;case 8:b.y("<br />\n");break;case 3:b.y("<em>");break;case 4:b.y("</em>");break;case 5:b.y("<strong>");
break;case 6:b.y("</strong>");break;case 7:b.y("<code>");b.aw(i,c.startOffset,c.length);b.y("</code>");break;case 9:var 
f=c.Z,m=new E(this.bz);m.bu=true;f.def.aU(this.bz,b,m.ai(f.link_text));break;case 10:var f=c.Z;f.def.aS(this.bz,b,f.
link_text);break;case 14:var k=c.Z;b.y('<sup id="fnref:');b.y(k.id);b.y('"><a href="#fn:');b.y(k.id);b.y(
'" rel="footnote">');b.y(k.index+1);b.y("</a></sup>");break;case 15:var e=c.Z;b.y("<abbr");if(e.Title){b.y(' title="');b
.aw(e.Title,0,e.Title.length);b.y('"')}b.y(">");b.aw(e.Abbr,0,e.Abbr.length);b.y("</abbr>");break}this.am(c)}};a.bm=
function(w,v,r){var b=this.bE;b.aX(w,v,r);var k=this.bK;k.length=0;var i=null,m=this.bz.ao(),p=this.bz.ExtraMode,f=b.bB;
while(!b.K()){var j=b.bB,c=null;switch(b.J()){case"*":case"_":c=this.S();if(c!=null)switch(c.type){case 13:case 11:case 
12:if(i==null)i=[];i.push(c);break}break;case"`":c=this.aJ();break;case"[":case"!":var s=b.bB;c=this.aL();if(c==null)b.
bB=s;break;case"<":var e=b.bB,o=ah(b);if(o!=null)if(!this.bz.SafeMode||o.av())c=this.V(1,e,b.bB-e);else b.bB=e;else{b.bB
=e;c=this.aG();if(c==null)b.bB=e}break;case"&":var e=b.bB;if(b.a9())c=this.V(2,e,b.bB-e);break;case" ":if(b.F(1)==" "&&Y
(b.F(2))){b.a8(2);if(!b.K()){b.a2();c=this.V(8,j,0)}}break;case"\n":if(this.bz.HtmlFormatLineBreaks){b.a8(1);if(!b.K()){
b.a2();c=this.V(8,j,0)}}break;case"\r":if(this.bz.HtmlFormatLineBreaks&&b.F(1)=="\n"){b.a8(2);if(!b.K()){b.a2();c=this.V
(8,j,0)}}break;case"\\":if(U(b.F(1),p)){c=this.V(0,b.bB+1,1);b.a8(2)}break}if(c==null&&m!=null&&!P(b.F(-1))){var u=b.bB;
for(var q in m){var n=m[q];if(b.bc(n.Abbr)&&!P(b.J())){c=this.P(15,n);break}b.bN=u}}if(c!=null){if(j>f)k.push(this.V(0,f
,j-f));k.push(c);f=b.bB}else b.a8(1)}if(b.bB>f)k.push(this.V(0,f,b.bB-f));if(i!=null)this.aY(k,i)};a.S=function(){var b=
this.bE,e=b.J(),k=e=="*"?"_":"*",c=b.bB;if(b.D()||ab(b.F(-1))){while(ae(b.J()))b.a8(1);if(b.K()||ab(b.J()))return this.V
(2,c,b.bB-c);b.bB=c}while(ae(b.F(-1)))b.a8(-1);var i=b.D()||ab(b.F(-1));b.bB=c;while(b.J()==e)b.a8(1);var j=b.bB-c;
while(ae(b.J()))b.a8(1);var f=b.K()||ab(b.J());b.bB=c+j;if(i)return this.V(11,c,b.bB-c);if(f||ac(b.J()))return this.V(12
,c,b.bB-c);return null};a.bj=function(i,f,b,c){var e=this.V(b.type,b.startOffset+c,b.length-c);b.length=c;f.splice(R(f,b
)+1,0,e);i.splice(R(i,b)+1,0,e);return e};a.aY=function(n,b){var m=this.bE.E,j=true;while(j){j=false;for(var i=0;i<b.
length;i++){var c=b[i];if(c.type!=11&&c.type!=13)continue;for(var k=i+1;k<b.length;k++){var f=b[k];if(f.type!=12&&f.type
!=13)break;if(m.charAt(c.startOffset)!=m.charAt(f.startOffset))continue;var e=Math.min(c.length,f.length);if(e>=3)e=e%2
==1?1:2;if(c.length>e){c=this.bj(n,b,c,c.length-e);i--}if(f.length>e)this.bj(n,b,f,e);c.type=e==1?3:5;f.type=e==1?4:6;b.
splice(R(b,c),1);b.splice(R(b,f),1);j=true;break}}}};a.aG=function(){if(this.bu)return null;var b=this.bE;b.a8(1);b.aB()
;var f=this.bz.ExtraMode;while(!b.K()){var e=b.J();if(ab(e))break;if(e==">"){var i=aA(b.Y(),f),c=null;c=new an(new C(
"auto",i,null),i);if(c!=null){b.a8(1);return this.P(9,c)}return null}b.a5(f)}return null};a.aL=function(){var b=this.bE,
e=b.aZ("!")?10:9;if(e==10&&!this.bz.AllowInlineImages)return null;if(b.aI()=="!"&&!this.bz.AllowInlineImages)if(b.aZ("["
))return null;if(!b.aZ("["))return null;var o=this.bB;if(this.bz.ExtraMode&&e==9&&b.aZ("^")){b.bb();b.aB();var m=b.a7();
if(m!=null&&b.aZ("]")){var s=this.bz.O(m);if(s>=0)return this.P(14,{index:s,id:m})}this.bB=o}if(this.bu&&e==9)
return null;var r=this.bz.ExtraMode;b.aB();var j=1;while(!b.K()){var p=b.J();if(p=="[")j++;else if(p=="]"){j--;if(j==0)
break}b.a5(r)}if(b.K())return null;var n=aA(b.Y(),r);b.a8(1);o=b.bB;if(b.aZ("(")){var u=as(b,null,this.bz.ExtraMode);if(
u==null)return null;b.bg();if(!b.aZ(")"))return null;return this.P(e,new an(u,n))}if(!b.aZ(" "))b.aZ("\t");if(b.X()){b.
a2();b.bb()}var c=null;if(b.J()=="["){b.a8(1);b.aB();if(!b.ab("]"))return null;c=b.Y();b.a8(1)}else b.bB=o;if(!c){c=n;
while(true){var k=c.indexOf("\n");if(k<0)break;var i=k;while(i>0&&ab(c.charAt(i-1)))i--;var f=k;while(f<c.length&&ab(c.
charAt(f)))f++;c=c.substr(0,i)+" "+c.substr(f)}}var q=this.bz.GetLinkDefinition(c);if(q==null)return null;return this.P(
e,new an(q,n))};a.aJ=function(){var b=this.bE,c=b.bB,e=0;while(b.aZ("`"))e++;b.bg();if(b.K())return this.V(0,c,b.bB-c);
var f=b.bB;if(!b.ab(b.E.substr(c,e)))return this.V(0,c,b.bB-c);var i=b.bB+e;while(ab(b.F(-1)))b.a8(-1);var j=this.V(7,f,
b.bB-f);b.bB=i;return j};a.V=function(f,e,c){if(this.bJ.length!=0){var b=this.bJ.pop();b.type=f;b.startOffset=e;b.length
=c;b.Z=null;return b}else return new ay(f,e,c)};a.P=function(e,c){if(this.bJ.length!=0){var b=this.bJ.pop();b.type=e;b.Z
=c;return b}else{var b=new ay(e,0,0);b.Z=c;return b}};a.am=function(b){b.Z=null;this.bJ.push(b)};function B(){}a=B.
prototype;a.E=null;a.u=BLOCKTYPE_CONST.Blank;a.R=0;a.M=0;a.aA=0;a.aC=0;a.B=null;a.Z=null;a.ap=function(){if(this.E==null
)return null;if(this.R==-1)return this.E;return this.E.substr(this.R,this.M)};a.an=function(){var c=new G();for(var b=0;
b<this.B.length;b++){c.y(this.B[b].ap());c.y("\n")}return c.bk()};a.aQ=function(e,c){for(var b=0;b<this.B.length;b++)
this.B[b].m(e,c)};a.a0=function(e){if(typeof this.Z=="string")return this.Z;var c=au(this.E,this.R,this.aq()),b=null;if(
c!=null){this.a6(c.end);b=c.id}else b=e.aE(this.E,this.R,this.M);this.Z=b;return b};a.m=function(c,b){switch(this.u){
case BLOCKTYPE_CONST.Blank:return;case BLOCKTYPE_CONST.p:c.bC.aj(b,this.E,this.R,this.M);break;case BLOCKTYPE_CONST.span
:c.bC.ag(b,this.E,this.R,this.M);b.y("\n");break;case BLOCKTYPE_CONST.h1:case BLOCKTYPE_CONST.h2:case BLOCKTYPE_CONST.h3
:case BLOCKTYPE_CONST.h4:case BLOCKTYPE_CONST.h5:case BLOCKTYPE_CONST.h6:if(c.ExtraMode&&!c.SafeMode){b.y("<h"+(this.u-
BLOCKTYPE_CONST.h1+1).toString());var k=this.a0(c);if(k){b.y(' id="');b.y(k);b.y('">')}else b.y(">")}else b.y("<h"+(this
.u-BLOCKTYPE_CONST.h1+1).toString()+">");c.bC.ag(b,this.E,this.R,this.M);b.y("</h"+(this.u-BLOCKTYPE_CONST.h1+1).
toString()+">\n");break;case BLOCKTYPE_CONST.hr:b.y("<hr />\n");return;case BLOCKTYPE_CONST.user_break:return;case 
BLOCKTYPE_CONST.ol_li:case BLOCKTYPE_CONST.ul_li:b.y("<li>");c.bC.ag(b,this.E,this.R,this.M);b.y("</li>\n");break;case 
BLOCKTYPE_CONST.html:b.y(this.E.substr(this.R,this.M));return;case BLOCKTYPE_CONST.unsafe_html:b.aw(this.E,this.R,this.M
);return;case BLOCKTYPE_CONST.codeblock:b.y("<pre");if(c.FormatCodeBlockAttributes!=null)b.y(c.FormatCodeBlockAttributes
(this.Z));b.y("><code>");var i=b;if(c.FormatCodeBlock){i=b;b=new G()}for(var e=0;e<this.B.length;e++){var j=this.B[e];b.
ax(j.E,j.R,j.M);b.y("\n")}if(c.FormatCodeBlock){i.y(c.FormatCodeBlock(b.bk(),this.Z));b=i}b.y("</code></pre>\n\n");
return;case BLOCKTYPE_CONST.quote:b.y("<blockquote>\n");this.aQ(c,b);b.y("</blockquote>\n");return;case BLOCKTYPE_CONST.
li:b.y("<li>\n");this.aQ(c,b);b.y("</li>\n");return;case BLOCKTYPE_CONST.ol:b.y("<ol>\n");this.aQ(c,b);b.y("</ol>\n");
return;case BLOCKTYPE_CONST.ul:b.y("<ul>\n");this.aQ(c,b);b.y("</ul>\n");return;case BLOCKTYPE_CONST.HtmlTag:var f=this.
Z,n=f.name.toLowerCase();if(n=="a")c.OnPrepareLink(f);else if(n=="img")c.OnPrepareImage(f,c.RenderingTitledImage);f.aV(b
);b.y("\n");this.aQ(c,b);f.aR(b);b.y("\n");return;case BLOCKTYPE_CONST.Composite:case BLOCKTYPE_CONST.footnote:this.aQ(c
,b);return;case BLOCKTYPE_CONST.table_spec:this.Z.m(c,b);return;case BLOCKTYPE_CONST.dd:b.y("<dd>");if(this.B!=null){b.y
("\n");this.aQ(c,b)}else c.bC.ag(b,this.E,this.R,this.M);b.y("</dd>\n");break;case BLOCKTYPE_CONST.dt:if(this.B==null){
var m=this.ap().split("\n");for(var e=0;e<m.length;e++){var o=m[e];b.y("<dt>");c.bC.ah(b,az(o));b.y("</dt>\n")}}else{b.y
("<dt>\n");this.aQ(c,b);b.y("</dt>\n")}break;case BLOCKTYPE_CONST.dl:b.y("<dl>\n");this.aQ(c,b);b.y("</dl>\n");return;
case BLOCKTYPE_CONST.p_footnote:b.y("<p>");if(this.M>0){c.bC.ag(b,this.E,this.R,this.M);b.y("&nbsp;")}b.y(this.Z);b.y(
"</p>\n");break}};a.a1=function(){this.u=BLOCKTYPE_CONST.p;this.R=this.aA;this.M=this.aC};a.aq=function(){return this.R+
this.M};a.a6=function(b){this.M=b-this.R};a.as=function(){var c=0;for(var b=this.aA;b<this.aA+this.aC;b++)if(this.E.
charAt(b)==" ")c++;else break;return c};a.W=function(b){this.u=b.u;this.E=b.E;this.R=b.R;this.M=b.M;this.aA=b.aA;this.aC
=b.aC;return this};function D(b,c){this.bz=b;this.bA=BLOCKTYPE_CONST.Blank;this.br=c}a=D.prototype;a.aK=function(c){var 
b=new H(c);return this.a4(b)};a.aO=function(f,e,b){var c=new H(f,e,b);return this.a4(c)};a.bl=function(b,c,e){if(e.
length>1)return false;if(e.length==1){var f=b.bB;b.bB=e[0].aA;c.bx=c.aF(b);if(c.bx==null)return false;b.bB=f;e.length=0}
while(true){var f=b.bB,i=c.aF(b);if(i!=null){c.bD.push(i);continue}b.bB=f;break}return true};a.a4=function(j){var e=[],b
=[],k=-1;while(!j.K()){var m=k==BLOCKTYPE_CONST.Blank,c=this.aa(j);k=c.u;if(c.u==BLOCKTYPE_CONST.dd)c.Z=m;if(c.u==
BLOCKTYPE_CONST.post_h1||c.u==BLOCKTYPE_CONST.post_h2){if(b.length>0){var f=b.pop();this.T(e,b);if(f.u!=BLOCKTYPE_CONST.
Blank){f.a1();f.u=c.u==BLOCKTYPE_CONST.post_h1?BLOCKTYPE_CONST.h1:BLOCKTYPE_CONST.h2;e.push(f);continue}}if(c.u==
BLOCKTYPE_CONST.post_h1){c.a1();b.push(c)}else if(c.M>=3){c.u=BLOCKTYPE_CONST.hr;e.push(c)}else{c.a1();b.push(c)}
continue}var i=b.length>0?b[0].u:BLOCKTYPE_CONST.Blank;if(c.u==BLOCKTYPE_CONST.table_spec){var o=c.Z,n=j.bB;if(!this.bl(
j,o,b)){j.bB=n;c.a1()}else{e.push(c);continue}}switch(c.u){case BLOCKTYPE_CONST.Blank:switch(i){case BLOCKTYPE_CONST.
Blank:this.ak(c);break;case BLOCKTYPE_CONST.p:this.T(e,b);this.ak(c);break;case BLOCKTYPE_CONST.quote:case 
BLOCKTYPE_CONST.ol_li:case BLOCKTYPE_CONST.ul_li:case BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote:case 
BLOCKTYPE_CONST.indent:b.push(c);break}break;case BLOCKTYPE_CONST.p:switch(i){case BLOCKTYPE_CONST.Blank:case 
BLOCKTYPE_CONST.p:b.push(c);break;case BLOCKTYPE_CONST.quote:case BLOCKTYPE_CONST.ol_li:case BLOCKTYPE_CONST.ul_li:case 
BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote:var f=b[b.length-1];if(f.u==BLOCKTYPE_CONST.Blank){this.T(e,b);b.push(c
)}else b.push(c);break;case BLOCKTYPE_CONST.indent:this.T(e,b);b.push(c);break}break;case BLOCKTYPE_CONST.indent:switch(
i){case BLOCKTYPE_CONST.Blank:b.push(c);break;case BLOCKTYPE_CONST.p:case BLOCKTYPE_CONST.quote:var f=b[b.length-1];if(f
.u==BLOCKTYPE_CONST.Blank){this.T(e,b);b.push(c)}else{c.a1();b.push(c)}break;case BLOCKTYPE_CONST.ol_li:case 
BLOCKTYPE_CONST.ul_li:case BLOCKTYPE_CONST.indent:case BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote:b.push(c);break}
break;case BLOCKTYPE_CONST.quote:if(i!=BLOCKTYPE_CONST.quote)this.T(e,b);b.push(c);break;case BLOCKTYPE_CONST.ol_li:case
 BLOCKTYPE_CONST.ul_li:switch(i){case BLOCKTYPE_CONST.Blank:b.push(c);break;case BLOCKTYPE_CONST.p:case BLOCKTYPE_CONST.
quote:var f=b[b.length-1];if(f.u==BLOCKTYPE_CONST.Blank||this.bA==BLOCKTYPE_CONST.ol_li||this.bA==BLOCKTYPE_CONST.ul_li
||this.bA==BLOCKTYPE_CONST.dd){this.T(e,b);b.push(c)}else{c.a1();b.push(c)}break;case BLOCKTYPE_CONST.ol_li:case 
BLOCKTYPE_CONST.ul_li:if(c.u!=BLOCKTYPE_CONST.ol_li&&c.u!=BLOCKTYPE_CONST.ul_li)this.T(e,b);if(b.length>2)if(b[b.length-
1].u==BLOCKTYPE_CONST.Blank&&b[b.length-2].u==BLOCKTYPE_CONST.Blank)this.T(e,b);if(i!=c.u&&(c.u==BLOCKTYPE_CONST.ol_li||
c.u==BLOCKTYPE_CONST.ul_li)&&c.as()==0)this.T(e,b);b.push(c);break;case BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote
:if(c.u!=i)this.T(e,b);b.push(c);break;case BLOCKTYPE_CONST.indent:this.T(e,b);b.push(c);break}break;case 
BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote:switch(i){case BLOCKTYPE_CONST.Blank:case BLOCKTYPE_CONST.p:case 
BLOCKTYPE_CONST.dd:case BLOCKTYPE_CONST.footnote:this.T(e,b);b.push(c);break;default:c.a1();b.push(c);break}break;
default:this.T(e,b);e.push(c);break}}this.T(e,b);if(this.bz.ExtraMode)this.H(e);return e};a.U=function(c){var b;if(this.
bz.bF.length>1)b=this.bz.bF.pop();else b=new B();b.aA=c;return b};a.ak=function(b){this.bz.bF.push(b)};a.al=function(b){
for(var c=0;c<b.length;c++)this.bz.bF.push(b[c]);b.length=0};a.aT=function(f){var b=this.bz.au();for(var c=0;c<f.length;
c++){var e=f[c];b.y(e.E.substr(e.R,e.M));b.y("\n")}return b.bk()};a.T=function(c,b){while(b.length>0&&b[b.length-1].u==
BLOCKTYPE_CONST.Blank)this.ak(b.pop());if(b.length==0)return;switch(b[0].u){case BLOCKTYPE_CONST.p:this.Q(b,c);break;
case BLOCKTYPE_CONST.quote:var p=this.aT(b),n=new D(this.bz,this.br);n.bA=BLOCKTYPE_CONST.quote;var m=this.U(b[0].aA);m.
u=BLOCKTYPE_CONST.quote;m.B=n.aK(p);this.al(b);c.push(m);break;case BLOCKTYPE_CONST.ol_li:if(b[0].orderedListNum&&b[0].
orderedListNum==1)c.push(this.N(b));else{if(b[0].listNumLength){var o=b[0].listNumLength+2;b[0].R-=o;b[0].M+=o}this.Q(b,
c)}break;case BLOCKTYPE_CONST.ul_li:c.push(this.N(b));break;case BLOCKTYPE_CONST.dd:if(c.length>0){var i=c[c.length-1];
switch(i.u){case BLOCKTYPE_CONST.p:i.u=BLOCKTYPE_CONST.dt;break;case BLOCKTYPE_CONST.dd:break;default:var j=this.U(i.aA)
;j.u=BLOCKTYPE_CONST.dt;j.B=[];j.B.push(i);c.pop();c.push(j);break}}c.push(this.G(b));break;case BLOCKTYPE_CONST.
footnote:this.bz.z(this.L(b));break;case BLOCKTYPE_CONST.indent:var e=this.U(b[0].aA);e.u=BLOCKTYPE_CONST.codeblock;e.B=
[];var f=b[0].ap();if(f.substr(0,2)=="{{"&&f.substr(f.length-2,2)=="}}"){e.Z=f.substr(2,f.length-4);b.splice(0,1)}for(
var k=0;k<b.length;k++)e.B.push(b[k]);c.push(e);b.length=0;break}};a.Q=function(b,e){var c=this.U(b[0].aA);c.u=
BLOCKTYPE_CONST.p;c.E=b[0].E;c.R=b[0].R;c.a6(b[b.length-1].aq());e.push(c);this.al(b)};a.aa=function(c){var b=this.U(c.
bB);b.E=c.E;b.R=c.bB;b.M=-1;b.u=this.ac(c,b);if(b.M<0){c.be();b.M=c.bB-b.R}b.aC=c.bB-b.aA;c.a2();return b};a.ac=function
(b,c){var e=b.bB;if(b.X())return this.ad(BLOCKTYPE_CONST.Blank,c,b,e);var f=b.J(),i=0;if(f=="#"){i=1;b.a8(1);while(b.J()
=="#"){i++;b.a8(1)}if(i>6)i=6;b.bb();c.R=b.bB;b.be();if(this.bz.ExtraMode&&!this.bz.SafeMode){var n=au(b.E,c.R,b.bB);if(
n!=null){c.Z=n.id;b.bB=n.end}}var q=0;while(b.bB>c.R&&b.F(-1)=="#"){q++;b.a8(-1)}while(b.bB>c.R&&ab(b.F(-1)))b.a8(-1);
if(!this.bz.RequireHeaderClosingTag||i===q){c.M=b.bB-c.R;b.be();return this.ad(BLOCKTYPE_CONST.h1+i-1,c,b,e)}else{c.
contentEnd=-1;c.R=e;b.bB=e}}if(f=="-"||f=="="){var k=f;while(b.J()==k)b.a8(1);b.bb();if(b.X())return this.ad(k=="="?
BLOCKTYPE_CONST.post_h1:BLOCKTYPE_CONST.post_h2,c,b,e);b.bB=e}if(this.bz.ExtraMode){var v=aw(b);if(v!=null){c.Z=v;
return this.ad(BLOCKTYPE_CONST.table_spec,c,b,e)}b.bB=e;if(f=="~"||f=="`"){if(this.aM(b,c))return this.ad(c.u,c,b,e);b.
bB=e}}var j=-1,u=0;while(!b.X()){if(b.J()==" "){if(j<0)u++}else if(b.J()=="\t"){if(j<0)j=b.bB}else break;b.a8(1)}if(b.X(
)){c.M=0;return this.ad(BLOCKTYPE_CONST.Blank,c,b,e)}if(u>=4){c.R=e+4;return this.ad(BLOCKTYPE_CONST.indent,c,b,e)}if(j
>=0&&j-e<4){c.R=j+1;return this.ad(BLOCKTYPE_CONST.indent,c,b,e)}c.R=b.bB;f=b.J();if(f=="<"){if(this.a3(b,c))return this
.ad(c.u,c,b,e);b.bB=c.R}if(f==">"){if(ad(b.F(1))){b.a8(2);c.R=b.bB;return this.ad(BLOCKTYPE_CONST.quote,c,b,e)}b.a8(1);c
.R=b.bB;return this.ad(BLOCKTYPE_CONST.quote,c,b,e)}if(f=="-"||f=="_"||f=="*"){var p=0;while(!b.X()){var k=b.J();if(b.J(
)==f){p++;b.a8(1);continue}if(ad(b.J())){b.a8(1);continue}break}if(b.X()&&p>=3)if(this.bz.UserBreaks)return this.ad(
BLOCKTYPE_CONST.user_break,c,b,e);else return this.ad(BLOCKTYPE_CONST.hr,c,b,e);b.bB=c.R}if(this.bz.ExtraMode&&f=="*"&&b
.F(1)=="["){b.a8(2);b.bb();b.aB();while(!b.X()&&b.J()!="]")b.a8(1);var o=az(b.Y());if(b.J()=="]"&&b.F(1)==":"&&o){b.a8(2
);b.bb();b.aB();b.be();var y=b.Y();this.bz.x(o,y);return this.ad(BLOCKTYPE_CONST.Blank,c,b,e)}b.bB=c.R}if((f=="*"||f==
"+"||f=="-")&&ad(b.F(1))){b.a8(1);b.bb();c.R=b.bB;return this.ad(BLOCKTYPE_CONST.ul_li,c,b,e)}if(f==":"&&this.bz.
ExtraMode&&ad(b.F(1))){b.a8(1);b.bb();c.R=b.bB;return this.ad(BLOCKTYPE_CONST.dd,c,b,e)}if(X(f)){var m="";while(X(b.J())
){m+=b.J();b.a8(1)}if(b.aZ(".")&&b.bb()){c.R=b.bB;c.listNumLength=m.length;c.orderedListNum=m;return this.ad(
BLOCKTYPE_CONST.ol_li,c,b,e)}b.bB=c.R}if(f=="["){if(this.bz.ExtraMode&&b.F(1)=="^"){var w=b.bB;b.a8(2);var r=b.a7();if(r
!=null&&b.aZ("]")&&b.aZ(":")){b.bb();c.R=b.bB;c.Z=r;return this.ad(BLOCKTYPE_CONST.footnote,c,b,e)}b.bB=w}var s=ao(b,
this.bz.ExtraMode);if(s!=null){this.bz.A(s);return this.ad(BLOCKTYPE_CONST.Blank,c,b,e)}}return BLOCKTYPE_CONST.p};a.ad=
function(c,b,f,e){if(R(this.bz.DisabledBlockTypes,c)>-1){b.contentEnd=-1;b.R=e;f.be();b.M=f.bB-e;return BLOCKTYPE_CONST.
p}else return c};a.at=function(c){var b=c.attributes.markdown;if(b==undefined)if(this.br)return 3;else return 0;delete c
.attributes.markdown;if(b=="1")return(c.ar()&8)!=0?2:1;if(b=="block")return 1;if(b=="deep")return 3;if(b=="span")
return 2;return 4};a.aN=function(b,e,o,m){var f=b.bB,k=1,j=false;while(!b.K()){if(!b.ab("<"))break;var n=b.bB,i=ah(b);
if(i==null){b.a8(1);continue}if(this.bz.SafeMode&&m==4&&!j)if(!i.av())j=true;if(i.closed)continue;if(i.name==o.name)if(i
.closing){k--;if(k==0){b.bb();b.a2();e.u=BLOCKTYPE_CONST.HtmlTag;e.Z=o;e.a6(b.bB);switch(m){case 2:var c=this.U(f);c.E=b
.E;c.u=BLOCKTYPE_CONST.span;c.R=f;c.M=n-f;e.B=[];e.B.push(c);break;case 1:case 3:var p=new D(this.bz,m==3);e.B=p.aO(b.E,
f,n-f);break;case 4:if(j){e.u=BLOCKTYPE_CONST.unsafe_html;e.a6(b.bB)}else{var c=this.U(f);c.E=b.E;c.u=BLOCKTYPE_CONST.
html;c.R=f;c.M=n-f;e.B=[];e.B.push(c)}break}return true}}else k++}return false};a.a3=function(b,c){var f=b.bB,i=ah(b);
if(i==null)return false;if(i.closing)return false;var m=false;if(this.bz.SafeMode&&!i.av())m=true;var q=i.ar();if((q&1)
==0)return false;if((q&4)!=0||i.closed){b.bb();b.a2();c.M=b.bB-c.R;c.u=m?BLOCKTYPE_CONST.unsafe_html:BLOCKTYPE_CONST.
html;return true}if((q&2)!=0){b.bb();if(!b.X())return false}var o=this.bz.ExtractHeadBlocks&&i.name.toLowerCase()==
"head",u=b.bB;if(!o&&this.bz.ExtraMode){var n=this.at(i);if(n!=0)return this.aN(b,c,i,n)}var k=null,p=1;while(!b.K()){
if(!b.ab("<"))break;var s=b.bB,j=ah(b);if(j==null){b.a8(1);continue}if(this.bz.SafeMode&&!j.av())m=true;if(j.closed)
continue;if(!o&&!j.closing&&this.bz.ExtraMode&&!m){var n=this.at(j);if(n!=0){var r=this.U(f);if(this.aN(b,r,j,n)){if(k==
null)k=[];if(s>f){var e=this.U(f);e.E=b.E;e.u=BLOCKTYPE_CONST.html;e.R=f;e.M=s-f;k.push(e)}k.push(r);f=b.bB;continue}
else this.ak(r)}}if(j.name==i.name&&!j.closed)if(j.closing){p--;if(p==0){b.bb();b.a2();if(m){c.u=BLOCKTYPE_CONST.
unsafe_html;c.a6(b.bB);return true}if(k!=null){if(b.bB>f){var e=this.U(f);e.E=b.E;e.u=BLOCKTYPE_CONST.html;e.R=f;e.M=b.
bB-f;k.push(e)}c.u=BLOCKTYPE_CONST.Composite;c.a6(b.bB);c.B=k;return true}if(o){var v=b.E.substr(u,s-u);this.bz.
HeadBlockContent=this.bz.HeadBlockContent+az(v)+"\n";c.u=BLOCKTYPE_CONST.html;c.R=b.bN;c.contentEnd=b.bN;c.aA=b.bN;
return true}c.u=BLOCKTYPE_CONST.html;c.M=b.bB-c.R;return true}}else p++}return BLOCKTYPE_CONST.Blank};a.N=function(b){
var r=b[0].u,u=b[0].as();for(var c=1;c<b.length;c++){if(b[c].u==BLOCKTYPE_CONST.p&&(b[c-1].u==BLOCKTYPE_CONST.p||b[c-1].
u==BLOCKTYPE_CONST.ul_li||b[c-1].u==BLOCKTYPE_CONST.ol_li)){b[c-1].a6(b[c].aq());this.ak(b[c]);b.splice(c,1);c--;
continue}if(b[c].u!=BLOCKTYPE_CONST.indent&&b[c].u!=BLOCKTYPE_CONST.Blank){var s=b[c].as();if(s>u){b[c].u=
BLOCKTYPE_CONST.indent;var v=b[c].aq();b[c].R=b[c].aA+s;b[c].a6(v)}}}var i=this.U(0);i.u=r==BLOCKTYPE_CONST.ul_li?
BLOCKTYPE_CONST.ul:BLOCKTYPE_CONST.ol;i.B=[];for(var c=0;c<b.length;c++){var k=c;while(k>0&&b[k-1].u==BLOCKTYPE_CONST.
Blank)k--;var f=c;while(f<b.length-1&&b[f+1].u!=BLOCKTYPE_CONST.ul_li&&b[f+1].u!=BLOCKTYPE_CONST.ol_li)f++;if(k==f)i.B.
push(this.U().W(b[c]));else{var o=false,n=this.bz.au();for(var e=k;e<=f;e++){var m=b[e];n.y(m.E.substr(m.R,m.M));n.y(
"\n");if(b[e].u==BLOCKTYPE_CONST.Blank)o=true}var j=this.U();j.u=BLOCKTYPE_CONST.li;j.aA=b[k].aA;var p=new D(this.bz);p.
bA=r;j.B=p.aK(n.bk());if(!o)for(var e=0;e<j.B.length;e++){var q=j.B[e];if(q.u==BLOCKTYPE_CONST.p)q.u=BLOCKTYPE_CONST.
span}i.B.push(j)}c=f}i.aA=i.B[0].aA;this.al(b);b.length=0;return i};a.G=function(b){for(var c=1;c<b.length;c++)if(b[c].u
==BLOCKTYPE_CONST.p&&(b[c-1].u==BLOCKTYPE_CONST.p||b[c-1].u==BLOCKTYPE_CONST.dd)){b[c-1].a6(b[c].aq());this.ak(b[c]);b.
splice(c,1);c--;continue}var k=b[0].Z;if(b.length==1&&!k){var m=b[0];b.length=0;return m}var i=this.bz.au();for(var c=0;
c<b.length;c++){var f=b[c];i.y(f.E.substr(f.R,f.M));i.y("\n")}var e=this.U(b[0].aA);e.u=BLOCKTYPE_CONST.dd;var j=new D(
this.bz);j.bA=BLOCKTYPE_CONST.dd;e.B=j.aK(i.bk());this.al(b);b.length=0;return e};a.H=function(e){var c=null;for(var b=0
;b<e.length;b++)switch(e[b].u){case BLOCKTYPE_CONST.dt:case BLOCKTYPE_CONST.dd:if(c==null){c=this.U(e[b].aA);c.u=
BLOCKTYPE_CONST.dl;c.B=[];e.splice(b,0,c);b++}c.B.push(e[b]);e.splice(b,1);b--;break;default:c=null;break}};a.L=function
(c){for(var b=1;b<c.length;b++)if(c[b].u==BLOCKTYPE_CONST.p&&(c[b-1].u==BLOCKTYPE_CONST.p||c[b-1].u==BLOCKTYPE_CONST.
footnote)){c[b-1].a6(c[b].aq());this.ak(c[b]);c.splice(b,1);b--;continue}var i=this.bz.au();for(var b=0;b<c.length;b++){
var f=c[b];i.y(f.E.substr(f.R,f.M));i.y("\n")}var j=new D(this.bz);j.bA=BLOCKTYPE_CONST.footnote;var e=this.U(c[0].aA);e
.u=BLOCKTYPE_CONST.footnote;e.Z=c[0].Z;e.B=j.aK(i.bk());this.al(c);c.length=0;return e};a.aM=function(b,e){var m=b.bB,k=
b.J();b.aB();while(b.J()==k)b.a8(1);var f=b.Y();if(f.length<3)return false;b.bb();if(!b.X())return false;b.a2();var j=b.
bB;if(!b.ab(f))return false;if(!Y(b.F(-1)))return false;var i=b.bB;b.a8(f.length);b.bb();if(!b.X())return false;e.u=
BLOCKTYPE_CONST.codeblock;e.B=[];i--;var c=this.U(m);c.u=BLOCKTYPE_CONST.indent;c.E=b.E;c.R=j;c.M=i-j;e.B.push(c);
return true};function I(){this.bs=[];this.bx=null;this.bD=[]}a=I.prototype;a.az=false;a.bn=false;a.aF=function(b){b.bb()
;if(b.X())return null;var e=this.az;if(this.az&&!b.aZ("|")){e=true;return null}var c=[];while(!b.X()){b.aB();while(!b.X(
)&&b.J()!="|")b.a5(true);c.push(az(b.Y()));e|=b.aZ("|")}if(!e)return null;while(c.length<this.bs.length)c.push("&nbsp;")
;b.a2();return c};a.aW=function(i,b,e,f){for(var c=0;c<e.length;c++){b.y("\t<");b.y(f);if(c<this.bs.length)switch(this.
bs[c]){case 1:b.y(' align="left"');break;case 2:b.y(' align="right"');break;case 3:b.y(' align="center"');break}b.y(">")
;i.bC.ah(b,e[c]);b.y("</");b.y(f);b.y(">\n")}};a.m=function(e,b){b.y("<table>\n");if(this.bx!=null){b.y(
"<thead>\n<tr>\n");this.aW(e,b,this.bx,"th");b.y("</tr>\n</thead>\n")}b.y("<tbody>\n");for(var c=0;c<this.bD.length;c++)
{var f=this.bD[c];b.y("<tr>\n");this.aW(e,b,f,"td");b.y("</tr>\n")}b.y("</tbody>\n");b.y("</table>\n")};function aw(b){b
.bb();if(b.J()!="|"&&b.J()!=":"&&b.J()!="-")return null;var c=null;if(b.aZ("|")){c=new I();c.az=true}while(true){b.bb();
if(b.J()=="|")return null;var f=b.aZ(":");while(b.J()=="-")b.a8(1);var i=b.aZ(":");b.bb();var e=0;if(f&&i)e=3;else if(f)
e=1;else if(i)e=2;if(b.X()){if(c==null)return null;c.bs.push(e);return c}if(!b.aZ("|"))return null;if(c==null)c=new I();
c.bs.push(e);b.bb();if(b.X()){c.bn=true;return c}}}this.Markdown=h;this.HtmlTag=x;this.SplitUserSections=F})();if(typeof
 exports!=="undefined"){exports.Markdown=MarkdownDeep.Markdown;exports.SplitUserSections=MarkdownDeep.SplitUserSections}
// MarkdownDeep - http://www.toptensoftware.com/markdowndeep
// Copyright (C) 2010-2011 Topten Software
var MarkdownDeepEditor=new(function(){var q=false,w={Z:"undo",Y:"redo",B:"bold",I:"italic",H:"heading",K:"code",U:
"ullist",O:"ollist",Q:"quote",N:"indent",E:"outdent",L:"link",G:"img",R:"hr"};function A(d,b){return d.substr(0,b.length
)==b}function t(d,b){return d.substr(-b.length)==b}function v(b){return b==" "||b=="\t"||b=="\r"||b=="\n"}function x(b){
return b=="\r"||b=="\n"}function y(e){var b=0,d=e.length;while(b<d&&v(e.charAt(b)))b++;while(d-1>b&&v(e.charAt(d-1)))d--
;return e.substr(b,d-b)}function s(b,d,e){if(b.addEventListener)b.addEventListener(d,e,false);else if(b.attachEvent)b.
attachEvent("on"+d,e)}function B(b,d,e){if(b.removeEventListener)b.removeEventListener(d,e,false);else if(b.detachEvent)
b.detachEvent("on"+d,e)}function u(b){if(b.preventDefault)b.preventDefault();if(b.cancelBubble!==undefined){b.
cancelBubble=true;b.keyCode=0;b.returnValue=false}return false}function z(d,b){return b-d.value.slice(0,b).split("\r\n")
.length+1}function p(){}a=p.prototype;a.D=function(b){this.ab=b;if(q){var d=document.selection.createRange(),f=d.
duplicate();f.moveToElementText(b);var e=-f.moveStart("character",-10000000);this.aa=-d.moveStart("character",-10000000)
-e;this.Z=-d.moveEnd("character",-10000000)-e;this.ae=b.value.replace(/\r\n/gm,"\n")}else{this.aa=b.selectionStart;this.
Z=b.selectionEnd;this.ae=b.value}};a.u=function(){var b=new p();b.ab=this.ab;b.Z=this.Z;b.aa=this.aa;b.ae=this.ae;
return b};a.m=function(){if(q){this.ab.value=this.ae;this.ab.focus();var b=this.ab.createTextRange();b.collapse(true);b.
moveEnd("character",this.Z);b.moveStart("character",this.aa);b.select()}else{var d=this.ab.scrollTop;this.ab.value=this.
ae;this.ab.focus();this.ab.setSelectionRange(this.aa,this.Z);this.ab.scrollTop=d}};a.J=function(b){this.ae=this.ae.
substr(0,this.aa)+b+this.ae.substr(this.Z);this.Z=this.aa+b.length};function r(b,d,e,f){if(b<d)return b;return b<d+e?d:b
+f-e}a.I=function(b,d,e){this.ae=this.ae.substr(0,b)+e+this.ae.substr(b+d);this.aa=r(this.aa,b,d,e.length);this.Z=r(this
.Z,b,d,e.length)};a.t=function(){return this.ae.substr(this.aa,this.Z-this.aa)};a.C=function(d,b){this.Z+=b;this.aa-=d};
a.G=function(b){return this.aa>=b.length&&this.ae.substr(this.aa-b.length,b.length)==b};a.U=function(b){return this.ae.
substr(this.aa,b.length)==b};a.s=function(b){return this.ae.substr(this.Z,b.length)==b};a.V=function(){while(v(this.ae.
charAt(this.aa)))this.aa++;while(this.Z>this.aa&&v(this.ae.charAt(this.Z-1)))this.Z--};a.E=function(b){return b==0||x(
this.ae.charAt(b-1))};a.p=function(b){while(b>0&&!x(this.ae.charAt(b-1)))b--;return b};a.r=function(b){while(b<this.ae.
length&&!x(this.ae.charAt(b)))b++;return b};a.w=function(b){return this.P(this.r(b))};a.T=function(b){while(b<this.ae.
length&&v(this.ae.charAt(b)))b++;return b};a.P=function(b){if(this.ae.substr(b,2)=="\r\n")return b+2;if(x(this.ae.charAt
(b)))return b+1;return b};a.R=function(b){if(b>2&&this.ae.substr(b-2,2)=="\r\n")return b-2;if(b>1&&x(this.ae.charAt(b-1)
))return b-1;return b};a.M=function(){this.aa=this.p(this.aa);if(!this.E(this.Z))this.Z=this.P(this.r(this.Z))};a.S=
function(b){while(b>0&&v(this.ae.charAt(b-1)))b--;return b};a.Q=function(b){while(v(this.ae.charAt(b)))b++;return b};a.L
=function(){this.aa=this.S(this.aa);this.Z=this.Q(this.Z)};a.o=function(){var d=this.t(),b=d.match(/\n[ \t\r]*\n/);if(b)
{alert("Please make a selection that doesn't include a paragraph break");return false}return true};a.B=function(f){var e
=this.ae.length;for(var b=f;b<e;b++){var d=this.ae[b];if(x(d))return true;if(!v(this.ae.charAt(b)))return false}
return true};a.y=function(b){var e=b;b=this.p(b);if(this.B(b))return b;while(b>0){var d=this.p(this.R(b));if(d==0)break;
if(this.B(d))break;b=d}if(this.q(b).ag!=0){b=this.p(e);while(b>0){if(this.q(b).ag!=0)return b;b=this.p(this.R(b))}}
return b};a.v=function(b){while(b<this.ae.length){if(this.B(b))break;b=this.w(b)}return b};a.K=function(){this.aa=this.y
(this.aa);this.Z=this.v(this.aa)};a.q=function(d){var e=this.ae.substr(d,10),b=e.match(/^\s{0,3}(\*|\d+\.)(?:\ |\t)*/);
if(!b)return{ac:"",ag:0};if(b[1]=="*")return{ac:"*",ag:b[0].length};else return{ac:"1",ag:b[0].length}};function l(b,e){
if(!b.setSelectionRange)q=true;this.Y=null;this.ah=[];this.af=0;this.ad=3;this.Markdown=new MarkdownDeep.Markdown();this
.Markdown.SafeMode=false;this.Markdown.ExtraMode=true;this.Markdown.NewWindowForLocalLinks=true;this.Markdown.
NewWindowForExternalLinks=true;this.ab=b;this.X=e;var f=this;s(b,"keyup",function(){f.H()});s(b,"keydown",function(d){
return f.F(d)});s(b,"paste",function(){f.H()});s(b,"input",function(){f.H()});s(b,"mousedown",function(){f.O(3)});this.H
()}var a=l.prototype,c=l.prototype;a.F=function(b){var d=null,f=true;if(b.ctrlKey||b.metaKey){var e=String.fromCharCode(
b.charCode||b.keyCode);if(!this.disableShortCutKeys&&w[e]!=undefined){this.InvokeCommand(w[e]);return u(b)}switch(e){
case"V":d=1;break;case"X":d=2;break}}else switch(b.keyCode){case 9:if(!this.disableTabHandling){this.InvokeCommand(b.
shiftKey?"untab":"tab");return u(b)}else d=1;break;case 37:case 39:case 38:case 40:case 36:case 35:case 33:case 34:d=3;
break;case 8:case 46:d=2;break;case 13:d=4;break;default:d=1}if(d!=null)this.O(d);if(!this.disableAutoIndent)if(b.
keyCode==13&&(!q||b.ctrlKey))this.IndentNewLine()};a.O=function(b){if(this.ad==b)return;this.ad=b;this.n()};a.n=function
(){var b=new p();b.D(this.ab);this.ah.splice(this.af,this.ah.length-this.af,b);this.af=this.ah.length};a.H=function(e){
var b=this.ab.value;if(b===this.Y&&this.Y!==null)return;if(this.onPreTransform)this.onPreTransform(this,b);var d=this.
Markdown.Transform(b);if(this.additionalPreviewFilter&&typeof this.additionalPreviewFilter==="function")d=this.
additionalPreviewFilter(d);if(this.onPostTransform)this.onPostTransform(this,d);if(this.X)this.X.innerHTML=d;if(this.
onPostUpdateDom)this.onPostUpdateDom(this);this.Y=b};c.onOptionsChanged=function(){this.Y=null;this.H()};c.cmd_undo=
function(){if(this.af>0){if(this.af==this.ah.length){this.n();this.af--}this.af--;this.ah[this.af].m();this.ad=0;this.H(
)}};c.cmd_redo=function(){if(this.af+1<this.ah.length){this.af++;this.ah[this.af].m();this.ad=0;this.H();if(this.af==
this.ah.length-1)this.ah.pop()}};a.N=function(d,f){d.K();d.L();var b=d.t();b=y(b);var g=0,e=b.match(/^(\#+)(.*?)(\#+)?$/
);if(e){b=y(e[2]);g=e[1].length}else{e=b.match(/^(.*?)(?:\r\n|\n|\r)\s*(\-*|\=*)$/);if(e){b=y(e[1]);g=e[2].charAt(0)==
"="?1:0}else{b=b.replace(/(\r\n|\n|\r)/gm,"");g=0}}if(f==-1)f=(g+1)%4;var h=0,j=0;if(f==0){if(b=="Heading"){d.J("");
return true}j=b.length;h=0}else{if(b=="")b="Heading";h=f+1;j=b.length;var i="";for(var k=0;k<f;k++)i+="#";b=i+" "+b+" "+
i}b+="\n\n";if(d.aa!=0){b="\n\n"+b;h+=2}d.J(b);d.aa+=h;d.Z=d.aa+j;return true};c.cmd_heading=function(b){return this.N(b
,-1)};c.cmd_h0=function(b){return this.N(b,0)};c.cmd_h1=function(b){return this.N(b,1)};c.cmd_h2=function(b){return this
.N(b,2)};c.cmd_h3=function(b){return this.N(b,3)};c.cmd_h4=function(b){return this.N(b,4)};c.cmd_h5=function(b){
return this.N(b,5)};c.cmd_h6=function(b){return this.N(b,6)};a.x=function(j,h){j.M();var d=j.t().split("\n");for(var b=0
;b<d.length;b++)if(d[b].charAt(0)=="\t"){var f="",e=0;while(d[b].charAt(e)=="\t"){f+="    ";e++}var i=f+d[b].substr(e);d
.splice(b,1,i)}if(h===null){var b;for(b=0;b<d.length;b++){if(y(d[b])=="")continue;if(d[b].charAt(0)=="\t"){var f="",e=0;
while(d[b].charAt(e)=="\t"){f+="    ";e++}var i=f+d[b].substr(b);d.splice(b,1,i)}if(!A(d[b],"    "))break}h=b!=d.length}
for(var b=0;b<d.length;b++){if(y(d[b])=="")continue;var g=d[b];if(h)g="    "+d[b];else if(A(d[b],"\t"))g=d[b].substr(1);
else if(A(d[b],"    "))g=d[b].substr(4);d.splice(b,1,g)}j.J(d.join("\n"))};c.cmd_code=function(b){if(b.aa==b.Z){var d=b.
p(b.aa);if(b.B(d)){b.L();b.J("\n\n    Code\n\n");b.aa+=6;b.Z=b.aa+4;return true}}if(b.t().indexOf("\n")<0){b.V();if(b.G(
"`"))b.aa--;if(b.s("`"))b.Z++;return this.k(b,"`")}this.x(b,null);return true};c.cmd_tab=function(b){if(b.t().indexOf(
"\n")>0)this.x(b,true);else{var e=b.p(b.aa),d;for(d=e;d<b.aa;d++)if(b.ae.charAt(d)!=" ")break;if(d==b.aa){var f=4-(d-e)%
4;b.J("    ".substr(0,f))}else b.J("\t");b.aa=b.Z}return true};c.cmd_untab=function(b){if(b.t().indexOf("\n")>0){this.x(
b,false);return true}return false};a.k=function(d,e){var g=d.ae,f=e.length,b=d.t();if(A(b,e)&&t(b,e))d.J(b.substr(f,b.
length-f*2));else{d.V();b=d.t();if(!b)b="text";else b=b.replace(/(\r\n|\n|\r)/gm,"");d.J(e+b+e);d.C(-f,-f)}return true};
c.cmd_bold=function(b){if(!b.o())return false;b.V();if(b.G("**"))b.aa-=2;if(b.s("**"))b.Z+=2;return this.k(b,"**")};c.
cmd_italic=function(b){if(!b.o())return false;b.V();if(b.G("*")&&!b.G("**")||b.G("***"))b.aa-=1;if(b.s("*")&&!b.G("**")
||b.s("***"))b.Z+=1;return this.k(b,"*")};a.A=function(b,h){if(false&&b.aa==b.Z){b.L();b.J("\n\n> Quote\n\n");b.aa+=4;b.
Z=b.aa+5;return true}b.M();var d=b.t().split("\n"),i=b.t(),g=false;for(var e=0;e<=d.length-1;e++){var f=d[e];if(h){if(A(
d[e],"> "))f=d[e].substr(2);if(e==d.length-1&&!d[e]){d.splice(e,1);continue}}else{if(!d[e]&&i)continue;f="> "+d[e];if(!b
.t())f+="quote";if(b.Z<b.ae.length&&b.ae[b.Z]!="\n")g=true}d.splice(e,1,f)}if(g)d.push("");b.J(d.join("\n"));return true
};c.cmd_indent=function(b){return this.A(b,false)};c.cmd_outdent=function(b){return this.A(b,true)};c.cmd_quote=function
(e){var d=e.t();for(var b=0;b<d.length;b++)if(x(d.charAt(b))||v(d.charAt(b)))e.aa++;else break;for(var b=d.length-1;b>0;
b--)if(x(d.charAt(b))||v(d.charAt(b)))e.Z--;else break;if(e.U("> "))return this.A(e,true);else return this.A(e,false)};a
.z=function(b,o){var g=[];if(b.t().indexOf("\n")>0){b.M();var f=b.aa;g.push(f);while(true){f=b.w(f);if(f>=b.Z)break;g.
push(f)}}else g.push(b.p(b.aa));var n=o=="*"?"* ":"1. ";for(var d=0;d<g.length;d++){var h=b.q(g[d]);if(h.ac==o){n="";
break}}for(var d=g.length-1;d>=0;d--){var f=g[d],h=b.q(f);b.I(f,h.ag,n)}var j=new MarkdownDeep.Markdown();j.ExtraMode=
true;var e=j.GetListItems(b.ae,b.aa);while(e!=null){var i=0;for(var d=0;d<e.length-1;d++){var h=b.q(e[d]+i);if(h.ac!="1"
)break;var m=(d+1).toString()+". ";b.I(e[d]+i,h.ag,m);i+=m.length-h.ag}var k=j.GetListItems(b.ae,e[e.length-1]+i);if(k!=
null&&k[0]!=e[0])e=k;else e=null}if(g.length>1)b.M();return true};c.cmd_ullist=function(b){return this.z(b,"*")};c.
cmd_ollist=function(b){return this.z(b,"1")};c.cmd_link=function(b){b.V();if(!b.o())return false;var e=prompt(
"Enter the target URL:");if(e===null)return false;var d=b.t();if(d.length==0)d="link text";var f="["+d+"]("+e+")";b.J(f)
;b.aa++;b.Z=b.aa+d.length;return true};c.cmd_img=function(b){b.V();if(!b.o())return false;var e=prompt(
"Enter the image URL");if(e===null)return false;var d=b.t();if(d.length==0)d="Image Text";var f="!["+d+"]("+e+")";b.J(f)
;b.aa+=2;b.Z=b.aa+d.length;return true};c.cmd_hr=function(b){b.L();if(b.aa==0)b.J("----------\n\n");else b.J(
"\n\n----------\n\n");b.aa=b.Z;return true};c.IndentNewLine=function(){var i=this,g,h=function(){window.clearInterval(g)
;var b=new p();b.D(i.ab);var e=b.p(b.R(b.aa)),d=e;while(true){var f=b.ae.charAt(d);if(f!=" "&&f!="\t")break;d++}if(d>e){
b.J(b.ae.substr(e,d-e));b.aa=b.Z}b.m()};g=window.setInterval(h,1);return false};c.cmd_indented_newline=function(b){b.J(
"\n");b.aa=b.Z;var e=b.p(b.R(b.aa)),d=e;while(true){var f=b.ae.charAt(d);if(f!=" "&&f!="\t")break;d++}if(d>e){b.J(b.ae.
substr(e,d-e));b.aa=b.Z}return true};c.InvokeCommand=function(b){if(b=="undo"||b=="redo"){this["cmd_"+b]();this.ab.focus
();return}var d=new p();d.D(this.ab);var e=d.u();if(this["cmd_"+b](d)){this.ad=0;this.ah.splice(this.af,this.ah.length-
this.af,e);this.af++;d.m();this.H();return true}else{this.ab.focus();return false}};delete a;delete c;this.Editor=l})();
// MarkdownDeep - http://www.toptensoftware.com/markdowndeep
// Copyright (C) 2010-2011 Topten Software
var MarkdownDeepEditorUI=new(function(){this.HelpHtmlWritten=false;this.HelpHtml=function(b){var a="";a+=
'<div class="mdd_modal" id="mdd_syntax_container" style="display:none">\n';a+='<div class="mdd_modal_frame">\n';a+=
'<div class="mdd_modal_button">\n';a+='<a href="'+b+'" id="mdd_help_location" style="display:none"></a>\n';a+=
'<a href="#" id="mdd_close_help"><span>Close</span></a>\n';a+="</div>\n";a+='<div class="mdd_modal_content">\n';a+=
'<div class="mdd_syntax" id="mdd_syntax">\n';a+='<div class="mdd_ajax_loader"></div>\n';a+="</div>\n";a+="</div>\n";a+=
"</div>\n";a+="</div>\n";return a};this.ToolbarHtml=function(){var a="";a+='<div class="mdd_links">\n';a+=
'<a href="#" class="mdd_help" tabindex=-1>How to Format</a>\n';a+="</div>\n";a+="<ul>\n";a+=
'<li><a href="#" class="mdd_button" id="mdd_undo" title="Undo (Ctrl+Z)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_redo" title="Redo (Ctrl+Y)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_heading" title="Change Heading Style (Ctrl+H, or Ctrl+0 to Ctrl+6)" tabindex=-1></a></li>\n'
;a+=
'<li><a href="#" class="mdd_button" id="mdd_code" title="Preformatted Code (Ctrl+K or Tab/Shift+Tab on multiline selection)" tabindex=-1></a></li>\n'
;a+='<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_bold" title="Bold (Ctrl+B)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_italic" title="Italic (Ctrl+I)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_ullist" title="Bullets (Ctrl+U)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_ollist" title="Numbering (Ctrl+O)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_outdent" title="Unquote (Ctrl+W)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_indent" title="Quote (Ctrl+Q)" tabindex=-1></a></li>\n';a+=
'<li><span class="mdd_sep"></span></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_link" title="Insert Hyperlink (Ctrl+L)" tabindex=-1></a></li>\n';a+=
'<li><a href="#" class="mdd_button" id="mdd_hr" title="Insert Horizontal Rule (Ctrl+R)" tabindex=-1></a></li>\n';a+=
"</ul>\n";a+='<div style="clear:both"></div>\n';return a};this.onResizerMouseDown=function(a){var h=window.event?a.
srcElement:a.target,f=$(h).closest(".mdd_resizer_wrap").prev(".mdd_editor_wrap").children("textarea")[0],l=a.clientY,k=$
(f).height();$(document).bind("mousemove.mdd",e);$(document).bind("mouseup.mdd",g);return false;function g(b){$(document
).unbind("mousemove.mdd");$(document).unbind("mouseup.mdd");return false}function e(c){var b=k+c.clientY-l;if(b<50)b=50;
$(f).height(b);return false}};var j=0,i=false;this.onShowHelpPopup=function(c,b){$("#mdd_syntax_container").fadeIn(
"fast");if(c&&b)$(c).addClass(b);$(".modal_content").scrollTop(j);$(document).bind("keydown.mdd",function(k){if(k.
keyCode==27){MarkdownDeepEditorUI.onCloseHelpPopup(c,b);return false}});if(!i){i=true;var a=$("#mdd_help_location").attr
("href");if(!a)a="mdd_help.htm";$("#mdd_syntax").load(a)}return false};this.onCloseHelpPopup=function(b,a){j=$(
".modal_content").scrollTop();if(b&&a)$(b).removeClass(a);$("#mdd_syntax_container").fadeOut("fast");$(document).unbind(
"keydown.mdd");$(document).unbind("scroll.mdd");return false};this.onToolbarButton=function(a){var b=$(a.target).closest
("div.mdd_toolbar_wrap").next(".mdd_editor_wrap").children("textarea").data("mdd");b.InvokeCommand($(a.target).attr("id"
).substr(4));return false}})();(function(a){a.fn.MarkdownDeep=function(g){var h={resizebar:true,toolbar:true,preview:
true,help_location:"mdd_help.html",active_modal_class:"",active_modal_selector:"#mdd_syntax_container"};if(g)a.extend(h,
g);return this.each(function(m){var d=a(this).parent(".mdd_editor_wrap");if(d.length==0)d=a(this).wrap(
'<div class="mdd_editor_wrap" />').parent();if(h.toolbar){var i=d.prev(".mdd_toolbar_wrap"),b=d.prev(".mdd_toolbar"),l=
false;if(i.length==0){if(b.length==0){b=a('<div class="mdd_toolbar" />');b.insertBefore(d)}else l=true;i=b.wrap(
'<div class="mdd_toolbar_wrap" />').parent()}else{b=i.children(".mdd_toolbar");if(b.length==0){b=a(
'<div class="mdd_toolbar" />');i.html(b)}else l=true}if(!l)b.append(a(MarkdownDeepEditorUI.ToolbarHtml()));a(
"a.mdd_button",b).click(MarkdownDeepEditorUI.onToolbarButton);a("a.mdd_help",b).click(function(){MarkdownDeepEditorUI.
onShowHelpPopup(h.active_modal_selector,h.active_modal_class)});if(!MarkdownDeepEditorUI.HelpHtmlWritten){var n=a(
MarkdownDeepEditorUI.HelpHtml(h.help_location));n.appendTo(a("body"));a("#mdd_close_help").click(function(){
MarkdownDeepEditorUI.onCloseHelpPopup(h.active_modal_selector,h.active_modal_class)});MarkdownDeepEditorUI.
HelpHtmlWritten=true}}var c,e;if(h.resizebar){e=d.next(".mdd_resizer_wrap");c=e.length==0?d.next(".mdd_resizer"):e.
children(".mdd_resizer");if(e.length==0){if(c.length==0){c=a('<div class="mdd_resizer" />');c.insertAfter(d)}e=c.wrap(
'<div class="mdd_resizer_wrap" />').parent()}else if(c.length==0){c=a('<div class="mdd_resizer" />');e.html(c)}e.bind(
"mousedown",MarkdownDeepEditorUI.onResizerMouseDown)}if(h.preview===true){var k=a(this).attr("data-mdd-preview");if(!k)k
=".mdd_preview";var j=a(k)[m];if(!j){a('<div class="mdd_preview"></div>').insertAfter(c?c:this);j=a(".mdd_preview")[m]}}
var f=new MarkdownDeepEditor.Editor(this,j);if(g){jQuery.extend(f.Markdown,g);jQuery.extend(f,g)}f.onOptionsChanged();a(
this).data("mdd",f)})}})(jQuery)
 